<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>E.V.H. AUTOTRADE ‚Äî V√©hicules √©lectriques & hybrides</title>
  <meta name="description" content="Importation directe de SUV hybrides et √©lectriques vers l'Afrique et l'Europe. Prix imbattables, v√©hicules neufs garantis, livraison rapide.">
  <link rel="preload" as="image" href="images/hero/dubai-1.webp">
  <!-- IMPORTANT : forcer le chargement du bon CSS -->
  <link rel="stylesheet" href="styles.css?v=13">

  <!-- Styles sp√©cifiques √† la nouvelle banni√®re -->
  <style>
    :root{ --brand:#e53e3e; }

    /* HERO dynamique (diaporama) */
    .hero-dyn{position:relative;height:540px;overflow:hidden;color:#fff}
    .hero-dyn .container{max-width:1150px;margin:0 auto;padding:0 1.25rem}
    .hero-dyn .bg-overlay{
      position:absolute;inset:0;z-index:1;
      background:
        radial-gradient(1100px 380px at 28% 32%, rgba(0,0,0,.22), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.68));
    }
    .hero-dyn .hero-inner{position:relative;z-index:3;top:16%;max-width:760px}
    .hero-dyn h1{font-size:2.6rem;line-height:1.1;margin:0 0 .6rem}
    .hero-dyn p{opacity:.95;margin:0 0 1rem}

    .hero-dyn .btn{
      display:inline-block;background:var(--brand);color:#fff;
      padding:.85rem 1.4rem;border-radius:999px;font-weight:800;text-decoration:none
    }
    .hero-dyn .btn:hover{filter:brightness(.95)}

    /* diaporama */
    .hero-slides .slides{position:absolute;inset:0;z-index:0}
    .hero-slides .slide{
      position:absolute;inset:0;width:100%;height:100%;object-fit:cover;
      opacity:0;animation:fadeHero 18s infinite;will-change:opacity
    }
    .hero-slides .s1{animation-delay:6s}
    .hero-slides .s2{animation-delay:8s}
    .hero-slides .s3{animation-delay:12s}
    @keyframes fadeHero{
      0%,7%{opacity:1}
      28%,100%{opacity:0}
    }

    /* Optionnel si tu ajoutes un PNG des v√©hicules d√©tour√©s */
    .hero-cars{
      position:absolute;right:2%;bottom:-6%;
      width:min(720px,48vw);max-width:100%;
      filter:drop-shadow(0 16px 28px rgba(0,0,0,.45));z-index:2;display:none; /* mets display:block si tu fournis l'image */
    }

    @media (max-width:980px){ .hero-cars{width:min(560px,60vw);bottom:-4%} }
    @media (max-width:680px){
      .hero-dyn{height:380px}
      .hero-dyn .hero-inner{top:12%}
      .hero-dyn h1{font-size:1.9rem}
      .hero-cars{width:min(460px,80vw);bottom:-2%}
    }
    /* accessibilit√© : r√©duit l‚Äôanimation si demand√© */
    @media (prefers-reduced-motion:reduce){
      .hero-slides .slide{animation:none;opacity:1}
      .hero-slides .s2,.hero-slides .s3{display:none}
    }
  </style>
</head>
<body>

  <!-- Header (classes v10) -->
  <header>
    <div class="logo-wrap">
      <div class="logo">
        <img src="images/EVH_logo.png" alt="E.V.H. AUTOTRADE">
      </div>
      <div class="brand">
        <span class="evh">E.V.H.</span>
        <span class="autotrade">AUTOTRADE</span>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="#catalogue">Catalogue</a></li>
        <li><a href="#avantages">Avantages</a></li>
        <li><a href="#">Acheter</a></li>
        <li><a href="#">√Ä propos</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- Nouvelle banni√®re dynamique (DIAPORAMA) -->
  <section class="hero-dyn hero-slides">
    <div class="slides">
      <!-- Mets tes fichiers dans /images/hero/ ; on cache l‚Äôimage si elle est absente -->
      <img class="slide s1" src="images/hero/dubai_2.webp" alt="" onerror="this.style.display='none'">
      <img class="slide s2" src="images/hero/dubai_1.webp" alt="" onerror="this.style.display='none'">
      <img class="slide s3" src="images/hero/dubai_3.webp" alt="" onerror="this.style.display='none'">
    </div>

    <!-- Optionnel : PNG v√©hicule(s) d√©tour√©(s) -->
    <img class="hero-cars" src="images/hero/cars.png" alt="" aria-hidden="true">

    <div class="bg-overlay"></div>

    <div class="hero-inner container">
      <h1>DRIVE THE FUTURE, TODAY</h1>
      <p>Hybrid & Electric Cars ‚Äî import direct, transport au port inclus</p>
      <a href="#catalogue" class="btn">D√©couvrez notre catalogue</a>
    </div>
  </section>

  <!-- Nos Avantages -->
  <section id="avantages" class="advantages-lovable">
    <div class="adv2-head">
      <h2 class="adv2-title">Nos <span class="gradient-text accent">Avantages</span></h2>
      <p class="adv2-sub">D√©couvrez pourquoi EVH AUTO TRADE est votre partenaire de confiance pour l'acquisition de SUV hybrides et √©lectriques.</p>
    </div>
    <div class="adv2-grid">
      <article class="adv2-card">
        <div class="inner">
          <div class="adv2-badge">‚úÖ</div>
          <div class="adv2-title-sm">Importation directe</div>
          <p class="adv2-desc">Prix r√©duits gr√¢ce √† notre r√©seau d'importation directe sans interm√©diaires.</p>
        </div>
      </article>
      <article class="adv2-card">
        <div class="inner">
          <div class="adv2-badge">üõ°Ô∏è</div>
          <div class="adv2-title-sm">SUV neufs ou quasi-neufs</div>
          <p class="adv2-desc">SUV r√©cents, couverts par une garantie importateur de 2 ans.</p>
        </div>
      </article>
      <article class="adv2-card">
        <div class="inner">
          <div class="adv2-badge">üöö</div>
          <div class="adv2-title-sm">Transport inclus au port</div>
          <p class="adv2-desc">Acheminement estim√© sous 45 jours. Assistance aux formalit√©s de d√©douanement (droits & taxes non inclus).</p>
        </div>
      </article>
    </div>
  </section>

  <!-- Notre Catalogue -->
  <section id="catalogue" class="section--light">
    <div class="container">
      <h2 class="section-title">Notre <span class="accent">Catalogue</span></h2>
      <p class="section-lead">Des SUV √©lectriques et hybrides r√©cents, au meilleur prix, avec transport inclus au port de destination.</p>
    </div>

    <!-- Grille de cartes -->
    <div id="vehicles-grid" class="grid">
      <p>Chargement du catalogue‚Ä¶</p>
    </div>
  </section>

  <script>
    // Charge la liste depuis hero.json (cache-bust + no-store)
    fetch('data/hero.json?v=11', { cache: 'no-store' })
      .then(res => res.json())
      .then(vehicles => {
        const grid = document.getElementById('vehicles-grid');
        if (!Array.isArray(vehicles) || vehicles.length === 0) {
          grid.innerHTML = '<p>Aucun v√©hicule disponible pour le moment.</p>';
          return;
        }

        grid.innerHTML = vehicles.map(v => {
          const KEYWORDS = ['autonomie', 'moteur', 'transmission', 'cam'];
          const uniq = arr => [...new Set((arr || []).map(x => String(x)))];

          const all = uniq(v.features);
          const primary = all.filter(f => KEYWORDS.some(k => f.toLowerCase().includes(k)));
          const secondary = all.filter(f => !primary.includes(f));

          const target = Number.isFinite(v.featuresCount) ? v.featuresCount : 4;

          let feats = [...primary, ...secondary].slice(0, target);
          while (feats.length < target) feats.push('__placeholder__');

          const featuresHTML = feats.map(f =>
            f === '__placeholder__'
              ? '<li class="placeholder">‚Ä¢</li>'
              : `<li>‚Ä¢ ${f}</li>`
          ).join('');

          const km = (v.mileage ?? 0).toLocaleString('fr-FR');

          return `
            <a class="card-link" href="vehicle.html?id=${encodeURIComponent(v.id)}">
              <article class="card">
                <img class="thumb" src="${v.images?.hero || ''}" alt="${v.name}"
                     onerror="this.src='https://via.placeholder.com/400x300?text=Image+non+disponible'">
                <div class="body">
                  <div class="name">${v.name}</div>
                  <div class="submeta">R√©f : <strong>${v.id}</strong></div>
                  <div class="price">Prix FCR (HT) : ${v.priceFCR || '-'}</div>
                  <div class="meta">
                    <span>Km : ${km} km</span>
                    <span>Immat. : ${v.regyear || '-'}</span>
                  </div>
                  <ul class="features">
                    ${featuresHTML}
                  </ul>
                </div>
              </article>
            </a>
          `;
        }).join('');
      })
      .catch(err => {
        console.error(err);
        document.getElementById('vehicles-grid').innerHTML =
          '<p style="color:red;">Erreur : impossible de charger le catalogue.</p>';
      });
  </script>
</body>
</html>
