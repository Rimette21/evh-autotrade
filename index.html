<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>E.V.H. AUTOTRADE — Catalogue</title>
  <link rel="stylesheet" href="styles.css?v=10">
  <meta name="description" content="Importation de SUV hybrides et électriques vers l'Afrique et l'Europe.">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo-wrap">
      <div class="logo"><img src="images/EVH_logo.png" alt="E.V.H. AUTOTRADE"></div>
      <div class="brand"><span class="evh">E.V.H.</span><span class="autotrade">AUTOTRADE</span></div>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="index.html">Catalogue</a></li>
        <li><a href="#">Avantages</a></li>
        <li><a href="#">Acheter</a></li>
        <li><a href="#">À propos</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- Bandeau -->
  <div class="banner">
    <div class="banner-cta">
      <a class="btn" href="#catalogue">Découvrez notre catalogue</a>
    </div>
  </div>

  <!-- Nos Avantages (style Lovable) -->
  <section class="advantages-lovable">
    <div class="adv2-head">
      <h2 class="adv2-title">Nos <span class="gradient-text">Avantages</span></h2>
      <p class="adv2-sub">
        Découvrez pourquoi EVH AUTO TRADE est votre partenaire de confiance pour l'acquisition de SUV hybrides et électriques.
      </p>
    </div>

    <div class="adv2-grid">
      <!-- Importation directe -->
      <article class="adv2-card">
        <div class="inner">
          <div class="adv2-badge" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M9 12l2 2 4-4"></path>
            </svg>
          </div>
          <h3 class="adv2-title-sm">Importation directe</h3>
          <p class="adv2-desc">
            Prix réduits grâce à notre réseau d'importation directe sans intermédiaires.
          </p>
        </div>
      </article>

      <!-- Véhicules neufs ou quasi-neufs -->
      <article class="adv2-card">
        <div class="inner">
          <div class="adv2-badge" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
          </div>
          <h3 class="adv2-title-sm">Véhicules neufs ou quasi-neufs</h3>
          <p class="adv2-desc">
            SUV neufs ou quasi-neufs, récents, couverts par une garantie importateur de 2 ans.
          </p>
        </div>
      </article>

      <!-- Transport inclus -->
      <article class="adv2-card">
        <div class="inner">
          <div class="adv2-badge" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <rect x="1.5" y="4" width="12" height="9" rx="2"></rect>
              <path d="M13.5 9h4l3 3v1.5h-7V9z"></path>
              <circle cx="7" cy="18" r="2"></circle>
              <circle cx="17" cy="18" r="2"></circle>
            </svg>
          </div>
          <h3 class="adv2-title-sm">Transport inclus jusqu’au port de destination</h3>
          <p class="adv2-desc">
            Acheminement estimé <b>sous 45 jours</b>. Assistance aux formalités de dédouanement à l’arrivée
            <i>(droits &amp; taxes non inclus)</i>.
          </p>
        </div>
      </article>
    </div>
  </section>

  <!-- Titre “Notre Catalogue” (même gradient) -->
  <section class="section--light" style="padding-top: 1.5rem;">
    <div class="container">
      <h2 class="section-title">Notre <span class="accent">Catalogue</span></h2>
      <p class="section-lead">
        Découvrez notre sélection de SUV hybrides et électriques, importés directement pour offrir les meilleurs prix.
      </p>
    </div>
  </section>

  <!-- Grille catalogue -->
  <main id="catalogue" class="grid">
    <p style="grid-column:1/-1;color:#111;opacity:.8">Chargement du catalogue…</p>
  </main>

  <!-- Script de chargement des cartes -->
  <script>
    (async function(){
      const mount = document.getElementById('catalogue');
      try{
        const res = await fetch('data/hero.json', { cache:'no-store' });
        if(!res.ok) throw new Error('HTTP '+res.status+' sur data/hero.json');
        const vehicles = await res.json();
        if(!Array.isArray(vehicles) || !vehicles.length){
          mount.innerHTML = '<p style="grid-column:1/-1">Aucun véhicule pour le moment.</p>';
          return;
        }

        const cards = vehicles.map(v=>{
          const img = (v.images && v.images.hero) ? v.images.hero : 'https://via.placeholder.com/600x450?text=Image';
          const mileage = Number(v.mileage||0);
          const features = Array.isArray(v.features) ? v.features : [];
          const relevant = features.filter(f => (
            /Autonomie/i.test(f) || /Moteur/i.test(f) || /Transmission/i.test(f) ||
            /Cam[eé]ra/i.test(f) || /R[ée]gulateur/i.test(f) || /Si[èe]ges/i.test(f)
          )).slice(0,4);

          const isPHEV = features.join(' ').toLowerCase().includes('hybride');
          const pill = `<span class="pill">${isPHEV?'PHEV':'BEV'}</span>`;

          /* Afficher uniquement la référence (plus de "Modèle 2024-01") */
          const modelRef = v.id ? `Réf: ${v.id}` : '';

          return `
            <a class="card-link" href="vehicle.html?id=${encodeURIComponent(v.id)}">
              <article class="card">
                <img class="thumb" src="${img}" alt="${v.name}"
                     onerror="this.src='https://via.placeholder.com/600x450?text=Image+indisponible'">
                <div class="body">
                  <div class="name">${v.name}</div>
                  <div class="submeta">${modelRef}</div>
                  <div class="price">Prix FCR (HT) : ${v.priceFCR || ''}</div>
                  <div class="meta">
                    <span>Km: ${mileage.toLocaleString('fr-FR')} km</span>
                    <span>Immat.: ${v.regyear || ''}</span>
                  </div>
                  <ul class="features">
                    ${relevant.map(f=>`<li>• ${f}</li>`).join('')}
                  </ul>
                  ${pill}
                </div>
              </article>
            </a>
          `;
        }).join('');

        mount.innerHTML = cards;
      }catch(e){
        console.error('Catalogue load failed:', e);
        mount.innerHTML = `<p style="grid-column:1/-1;color:#c53030">Erreur : impossible de charger le catalogue.</p>`;
      }
    })();
  </script>
</body>
</html>
